<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wildfly Collection for Ansible - middleware_automation.wildfly &mdash; Wildfly Ansible Collection  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="_static/ansible-basic-sphinx-ext.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Role Index" href="roles/index.html" />
    <link rel="prev" title="Welcome to Wildfly Collection documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Wildfly Ansible Collection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Wildfly Collection for Ansible - middleware_automation.wildfly</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#about">About</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i-know-nothing-about-ansible-but-i-want-to-install-wildfly-can-i">I know nothing about Ansible, but I want to install Wildfly, can I?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ansible-version-compatibility">Ansible version compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#included-content">Included content</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#roles">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-collection">Installing the collection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-collection">Building the collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-collection-to-install-and-run-wildfly-on-target-hosts">Using the collection to install and run Wildfly on target hosts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-collection-to-customize-wildfly-configuration">Using the collection to customize Wildfly configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-note-on-domain-mode">A note on domain mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roles/index.html">Role Index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="developing.html">Contributor’s Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Collection Versioning Strategy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Middleware collections</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/infinispan/">Infinispan / Red Hat Data Grid</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/keycloak/">Keycloak / Red Hat Single Sign-On</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/wildfly/">Wildfly / Red Hat JBoss EAP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/jws/">Tomcat / Red Hat JWS</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/amq/">ActiveMQ / Red Hat AMQ Broker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/amq_streams/">Kafka / Red Hat AMQ Streams</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/redhat-csp-download/">Red Hat CSP Download</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/ansible_collections_jcliff/">JCliff</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Wildfly Ansible Collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Wildfly Collection for Ansible - middleware_automation.wildfly</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="wildfly-collection-for-ansible-middleware-automation-wildfly">
<h1>Wildfly Collection for Ansible - middleware_automation.wildfly<a class="headerlink" href="#wildfly-collection-for-ansible-middleware-automation-wildfly" title="Link to this heading"></a></h1>
<!--start build_status -->
<p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/actions/workflows/ci.yml"><img alt="Build Status" src="https://github.com/ansible-middleware/wildfly/workflows/CI/badge.svg?branch=main" /></a></p>
<!--end build_status -->
<section id="about">
<h2>About<a class="headerlink" href="#about" title="Link to this heading"></a></h2>
<p>This Ansible Collection provides several roles to help install, setup and maintain Java JEE appserver Wildfly within the configuration management tool Ansible.</p>
<section id="i-know-nothing-about-ansible-but-i-want-to-install-wildfly-can-i">
<h3>I know nothing about Ansible, but I want to install Wildfly, can I?<a class="headerlink" href="#i-know-nothing-about-ansible-but-i-want-to-install-wildfly-can-i" title="Link to this heading"></a></h3>
<p>Yes, once Ansible is installed on your computer, you can simply run the following command (note that the inventory file needs to be populated with the name(s) of the machine(s) you wish to install Wildfly on):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install middleware_automation.wildfly
$ ansible-playbook -i inventory middleware_automation.wildfly.playbook
</pre></div>
</div>
<!--start requires_ansible-->
</section>
</section>
<section id="ansible-version-compatibility">
<h2>Ansible version compatibility<a class="headerlink" href="#ansible-version-compatibility" title="Link to this heading"></a></h2>
<p>This collection has been tested against following Ansible versions: <strong>&gt;=2.9.10</strong>.</p>
</section>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Link to this heading"></a></h2>
<p>Plugins and modules within a collection may be tested with only specific Ansible versions. A collection may contain metadata that identifies these versions.</p>
<!--end requires_ansible-->
</section>
<section id="included-content">
<h2>Included content<a class="headerlink" href="#included-content" title="Link to this heading"></a></h2>
<section id="roles">
<h3>Roles<a class="headerlink" href="#roles" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/roles/wildfly_install/README.md">wildfly_install</a>: download and install</p></li>
<li><p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/roles/wildfly_systemd/README.md">wildfly_systemd</a>: configure systemd unit</p></li>
<li><p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/roles/wildfly_driver/README.md">wildfly_driver</a>: install additional driver modules (ie. JDBC)</p></li>
<li><p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/roles/wildfly_utils/README.md">wildfly_utils</a>: utilities related to EAP</p></li>
<li><p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/roles/wildfly_validation/README.md">wildfly_validation</a>: validate deployed installation</p></li>
<li><p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/roles/wildfly_uninstall/README.md">wildfly_uninstall</a>: restore status pre wildfly_install</p></li>
</ul>
</section>
<section id="installing-the-collection">
<h3>Installing the collection<a class="headerlink" href="#installing-the-collection" title="Link to this heading"></a></h3>
<p>To install this Ansible collection:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install middleware_automation.wildfly
</pre></div>
</div>
<p>or with a downloaded or built tarball, run the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install /path/to/middleware_automation.wildfly.tgz
</pre></div>
</div>
<p>or via the included requirements file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install -r requirements.yml
</pre></div>
</div>
</section>
</section>
<section id="building-the-collection">
<h2>Building the collection<a class="headerlink" href="#building-the-collection" title="Link to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection build .
</pre></div>
</div>
</section>
<section id="using-the-collection-to-install-and-run-wildfly-on-target-hosts">
<h2>Using the collection to install and run Wildfly on target hosts<a class="headerlink" href="#using-the-collection-to-install-and-run-wildfly-on-target-hosts" title="Link to this heading"></a></h2>
<p>The collection comes with a simple playbook that allows to directly install and run Wildfly:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ansible-playbook -i inventory middleware_automation.wildfly.playbook
</pre></div>
</div>
<p>Note that depending on your use case, you might need to redefine some variables. In this case, you can simply import the playbook with the appropriate values:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---
- ansible.builtin.import_playbook: middleware_automation.wildfly.playbook
  vars:
    wildfly_config_base: &#39;standalone-full.xml&#39;
</pre></div>
</div>
<p>Overrideable variables are documented in the roles wildfly_install, wildfly_systemd, wildfly_drive</p>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ansible-middleware/common">middleware_automation.common</a></p></li>
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/collections/ansible/posix/index.html">ansible-posix</a></p></li>
</ul>
<!--start support -->
<!--end support -->
</section>
</section>
<section id="using-the-collection-to-customize-wildfly-configuration">
<h2>Using the collection to customize Wildfly configuration<a class="headerlink" href="#using-the-collection-to-customize-wildfly-configuration" title="Link to this heading"></a></h2>
<p>Regarding the configuration of the Java app server itself, the Ansible collection has a specific strategy, designed to ensure idempotency of the resulting setup, but also ensure Ansible has the capacity to fine-tune, as much as needed, the server.</p>
<p>First, the collection will use a template configuration file as a base (by default, it’s the standalone.xml provided with the server files). This file is first copy into wildfly.yml (can be renamed and relocated if needed to). Then, the server starts with this copy in read-only. So to apply any change to the configuration after this point, the user will need to use, either the YAML Config or the JBoss CLI. This ensures that the configuration can change can be performed by Ansible in an idempotent fashion.</p>
<p>Depending on the number of configuration changes and if the server is a new deployment, the user can decide to implement its configuration changes directly in the base template (for instance removing some subsystem from the standalone-full.xml and use this modified file as a base) or perform all the changes using the Yaml Config. The latter is generally the better approach, because it will also work with a running system, while the previous approach requires to deploy again the configuration file.</p>
<p>A last option is to use JBoss cli queries, within the Ansible, but it requires more work as the state has to be managed for Ansible. Which means, a first query will assess the current state of the server (is the configuration already correct?), then a second will be need to update, if needed, the configuration.</p>
</section>
<section id="a-note-on-domain-mode">
<h2>A note on domain mode<a class="headerlink" href="#a-note-on-domain-mode" title="Link to this heading"></a></h2>
<p>This collection does not provides any support to use Wildfly’s domain mode. The rationale behind this decision is that this Wildfly feature overlaps a lot with Ansible and it’s <strong>not recommended</strong> and cumbersome to combine those. So, for simplicity sake, this collection focus only on standalone deployment of Wildfly JEE servers.</p>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/ansible-middleware/wildfly/blob/main/LICENSE">GNU General Public License v2.0</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Wildfly Collection documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="roles/index.html" class="btn btn-neutral float-right" title="Role Index" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Red Hat, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>